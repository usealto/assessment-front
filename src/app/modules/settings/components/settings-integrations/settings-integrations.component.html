<div>
  <h2>{{ I18ns.settings.continuousSession.subtitle }}</h2>
  <p class="mb-4 alto-grey">{{ I18ns.settings.continuousSession.description }}</p>
</div>

<hr class="my-4" />
<div class="d-flex align-items-center">
  <div class="form-check form-switch d-inline-block align-middle me-5">
    <input
      #toggleConnector
      (click)="validateModal(ModalType.ToggleConnector, isConnectorActivated ? false : true, $event)"
      type="checkbox"
      class="form-check-input"
      [checked]="isConnectorActivated"
    />
  </div>
  <div class="d-grid">
    <span class="integration-titles" [ngStyle]="{ color: isConnectorActivated ? '#101828' : '#D0D5DD' }">
      {{ I18ns.settings.continuousSession.integrations.title }}
    </span>
    <span class="integration-subtitles" [ngStyle]="{ color: isConnectorActivated ? '#667085' : '#D0D5DD' }">
      {{ I18ns.settings.continuousSession.integrations.subtitle }}
    </span>
  </div>
</div>
<ng-container *ngIf="isConnectorActivated">
  <div class="d-flex align-items-center mt-5">
    <div class="px-3 me-5 connector" [class]="connector === Connector.Slack ? 'activated' : ''">
      <input
        class="form-check-input me-3"
        type="radio"
        id="exampleRadios1"
        value="option1"
        [checked]="connector === Connector.Slack"
        (click)="validateModal(ModalType.ChangeConnector, true, $event, Connector.Slack)"
      />
      <label class="form-check-label" for="exampleRadios1">
        <img src="assets/img/slack-logo.svg" width="16" height="16" alt="Slack Logo" class="me-2" />
        <span>{{ I18ns.settings.continuousSession.integrations.slack }}</span>
      </label>
    </div>
    <div class="pt-3 px-3 me-5 connector" [class]="connector === Connector.GoogleChat ? 'activated' : ''">
      <div class="form-check">
        <input
          class="form-check-input me-3"
          type="radio"
          id="exampleRadios2"
          value="option2"
          [checked]="connector === Connector.GoogleChat"
          (click)="validateModal(ModalType.ChangeConnector, true, $event, Connector.GoogleChat)"
        />
        <label class="form-check-label" for="exampleRadios2">
          <img src="assets/img/gchat-logo.svg" width="16" height="16" alt="Gchat Logo" class="me-2" />
          <span>{{ I18ns.settings.continuousSession.integrations.gchat }}</span>
        </label>
      </div>
    </div>
    <div class="py-3 connector" style="border-radius: 4px; padding-left: 1rem; padding-right: 1rem">
      <div class="form-check">
        <input class="form-check-input me-3" type="radio" id="exampleRadios3" value="option3" disabled />
        <label class="form-check-label" for="exampleRadios3">
          <img src="assets/img/teams-logo.svg" width="16" height="16" alt="Teams Logo" class="me-2" />
          <span>{{ I18ns.settings.continuousSession.integrations.teams }}</span>
        </label>
      </div>
    </div>
  </div>
  <ng-container *ngIf="connector === Connector.GoogleChat">
    <div class="flex-container">

      <div class="google-chat-instructions panel">
        <h3>{{ I18ns.settings.continuousSession.integrations.gchatSubtitle.googleChatInstructionsTitle }}</h3>
        <p>{{ I18ns.settings.continuousSession.integrations.gchatSubtitle.googleChatInstructions }}</p>
        <a href="https://workspace.google.com/marketplace/app/staging_alt0/705098494120" target="_blank">{{ I18ns.settings.continuousSession.integrations.gchatSubtitle.googleChatLink }}</a>
        <p>{{ I18ns.settings.continuousSession.integrations.gchatSubtitle.googleChatInstructions2 }}</p>
      </div>
      
      <div class="send-email-section panel" >
        <h3>{{ I18ns.settings.continuousSession.integrations.gchatSubtitle.emailSendTitle }}</h3>
        <button class="btn btn-primary mb-2" (click)="sendGchatInstruction()"><i class="bi bi-send"></i> {{ I18ns.settings.continuousSession.integrations.gchatSubtitle.emailSendButtonText }}</button>
        <span class="alto-badge">{{ nbUsersConnectorInactive + '/' + nbUsers + ' ' + I18ns.settings.continuousSession.integrations.gchatSubtitle.nonConnectedUsersText }}</span>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="connector === Connector.Slack">
    <div class="flex-container">

      <div class="google-chat-instructions panel">
        <h2>{{ I18ns.settings.continuousSession.integrations.slackSubtitle.notAdminTitle }}</h2>
        <h3>{{ I18ns.settings.continuousSession.integrations.slackSubtitle.sendEmail }}</h3>
        <div>
          <input class="my-2" type="text" placeholder="{{ I18ns.settings.continuousSession.integrations.slackSubtitle.emailExemple }}" [(ngModel)]="emailValue">
          <button class="btn btn-primary" (click)="sendEmailSlackAuthorization()"><i class="bi bi-send"></i> {{ I18ns.settings.continuousSession.integrations.slackSubtitle.emailSendButtonText }}</button>
        </div>
        <p>{{ I18ns.settings.continuousSession.integrations.slackSubtitle.notAdminText }}</p>
      </div>
      
      <div class="send-email-section panel" >
        <h2>{{ I18ns.settings.continuousSession.integrations.slackSubtitle.adminTitle }}</h2>
        <p>{{ I18ns.settings.continuousSession.integrations.slackSubtitle.adminText }}</p>
        <button class="button" (click)="openLinkSlack()">{{ I18ns.settings.continuousSession.integrations.slackSubtitle.authorConnection }}</button>
      </div>
    </div>
  </ng-container>
  <div class="mt-4 questions-pushed-box">
    <h3 class="questions-pushed">
      {{ I18ns.settings.continuousSession.integrations.questionPushedTitle }}
    </h3>
    <input class="my-2 questions-pushed-input form-control" type="text" disabled value="2" />
    <p class="questions-pushed subtitle">
      {{ I18ns.settings.continuousSession.integrations.questionPushedSubtitle }}
    </p>
  </div>
</ng-container>

<hr class="mb-4 mt-5" />
<div class="d-flex align-items-center">
  <div class="d-flex align-items-center">
    <div class="form-check form-switch d-inline-block align-middle me-5">
      <input
        (click)="validateModal(ModalType.ToggleWebApp, isWebAppActivated ? false : true, $event)"
        type="checkbox"
        class="form-check-input"
        [checked]="isWebAppActivated"
      />
    </div>
    <div class="d-grid">
      <span class="integration-titles" [ngStyle]="{ color: isWebAppActivated ? '#101828' : '#D0D5DD' }">
        {{ I18ns.settings.continuousSession.webApp.title }}
      </span>
      <span class="integration-subtitles" [ngStyle]="{ color: isWebAppActivated ? '#667085' : '#D0D5DD' }">
        {{ I18ns.settings.continuousSession.webApp.subtitle }}
      </span>
    </div>
  </div>
</div>
<div *ngIf="isWebAppActivated" class="mt-4 questions-pushed-box">
  <h3 class="questions-pushed">
    {{ I18ns.settings.continuousSession.integrations.questionPushedTitle }}
  </h3>
  <input class="my-2 questions-pushed-input form-control" type="text" disabled value="2" />
  <p class="questions-pushed subtitle">
    {{ I18ns.settings.continuousSession.integrations.questionPushedSubtitle }}
  </p>
</div>
