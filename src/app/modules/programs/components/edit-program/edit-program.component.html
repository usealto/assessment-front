<div class="header-panel2">
  <img class="emoji-title me-4" [src]="EmojiName.Bullseye | emoji" width="28" height="28">
  <h1>{{program ? I18ns.programs.forms.edit : I18ns.programs.forms.create}}</h1>
</div>

<div class="mt-4 form-nav mb-4">
  <div *ngFor="let tabOption of tabsOptions"
  class="step cursor-pointer"
  [class.cursor-pointer]="!!program"
  [class.highlight-step]="tabsControl.value === tabOption"
  (click)="switchTab(tabOption)">
    <i class="fs-5 tab-icon me-3 bi" [class]="tabOption.value === ETab.Informations ? 'bi-file-text' : tabOption.value === ETab.Questions ? 'bi-question-circle' : 'bi-share'"></i>
    <span>{{ tabOption.label }}</span>
  </div>
</div>

<ng-container [ngSwitch]="tabsControl.value.value">
  <!-- INFORMATIONS TAB -->
  <div *ngSwitchCase="ETab.Informations">
    <div class="infos">
      <i class="me-3 bi bi-info-circle"></i>
      <span>{{I18ns.programs.forms.step1.subtitle}}</span>
    </div>
    <form [formGroup]="programFormGroup">
      <div class="row">
        <div class="col-left">
          <img class="emoji" [src]="EmojiName.PageFacingUp | emoji" width="20" height="20" />
          <div>
            <label class="form-label required">{{ I18ns.programs.forms.step1.name }}</label>
            <p>{{ I18ns.programs.forms.step1.nameSubtitle }}</p>
          </div>
        </div>
        <div class="col">
        <alto-input-text [control]="programFormGroup.controls.nameControl" [placeholder]="I18ns.programs.forms.step1.namePlaceholder"></alto-input-text>
        </div>
      </div>
      <hr>
      <ng-container *ngIf="!program">
        <div  class="row">
          <div class="col-left">
            <img class="emoji" [src]="EmojiName.Label | emoji" width="20" height="20"/>
            <div>
              <label class="form-label">{{ I18ns.programs.forms.step1.tags }}</label>
              <p>{{ I18ns.programs.forms.step1.tagsSubtitle }}</p>
            </div>
          </div>
          <div class="col">
            <alto-input-pills
            [placeholder]="I18ns.programs.forms.step1.tagsPlaceholder"
            [controls]="tagControls"
            [options]="tagOptions"
            [hasPillAppearance]="false">
            </alto-input-pills>
          </div>
        </div>
        <hr>
      </ng-container>
      <div class="row">
        <div class="col-left">
          <img class="emoji" [src]="EmojiName.BustsInSilhouette | emoji" width="20" height="20"/>
          <div>
            <label class="form-label">{{ I18ns.programs.forms.step1.teams }}</label>
            <p>{{ I18ns.programs.forms.step1.teamsSubtitle }}</p>
          </div>
        </div>
        <div class="col">
          <alto-input-pills
          [placeholder]="I18ns.programs.forms.step1.teamsPlaceholder"
          [controls]="programFormGroup.controls.teamControls"
          [options]="teamOptions"
          [hasPillAppearance]="false">
          </alto-input-pills>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-left">
          <img class="emoji" [src]="EmojiName.Warning | emoji" width="20" height="20"/>
          <div>
            <label class="form-label required">{{ I18ns.programs.forms.step1.priority }}</label>
            <p>{{ I18ns.programs.forms.step1.prioritySubtitle }}</p>
          </div>
        </div>
        <div class="col">
          <alto-input-single-select
          [placeholder]="I18ns.programs.forms.step1.priorityPlaceholder"
          [control]="programFormGroup.controls.priorityControl"
          [options]="priorityOptions"
          [hasPillAppearance]="false">
          </alto-input-single-select>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-left">
          <img class="emoji" [src]="EmojiName.SportsMedal | emoji" width="20" height="20"/>
          <div>
            <label class="form-label required">{{ I18ns.programs.forms.step1.expectation }}</label>
            <p>{{ I18ns.programs.forms.step1.expectationSubtitle }}</p>
          </div>
        </div>
        <div class="col">
          <alto-range [control]="programFormGroup.controls.expectationControl"></alto-range>
        </div>
      </div>
    </form>
    <hr class="mt-8 bottom-hr" />
    <div class="d-flex flex-nowrap justify-content-between">
        <button class="btn btn-outline-secondary" (click)="cancel()">
          {{ I18ns.shared.cancel }}
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="!programFormGroup.dirty || !programFormGroup.valid" (click)="submitForm()">
          {{ I18ns.programs.forms.step1.create }}
        </button>
    </div>

  </div>

  <!-- QUESTIONS TAB -->
  <div *ngSwitchCase="ETab.Questions">
    <div class="infos">
      <i class="me-3 bi bi-info-circle"></i>
      <span class="">{{ I18ns.programs.forms.step2.subtitle }}</span>
    </div>

    <alto-placeholder-manager [status]="associatedQuestionsDataStatus">
      <!-- associated questions -->
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div>
          <h2>
            <img class="emoji" [src]="EmojiName.RedQuestionMark | emoji" width="16" height="16" />
            {{ I18ns.programs.forms.step2.associatedQuestions.title }}
          </h2>
          <p class="subtitle alto-grey mb-4">{{ I18ns.programs.forms.step2.associatedQuestions.subtitle }}</p>
        </div>
        <button class="btn btn-primary">
          <i class="bi bi-plus-lg"></i> <span>{{ I18ns.programs.forms.step2.new }}</span>
        </button>
      </div>

      <div>
        <alto-input-search class="d-flex mb-4" [searchControl]="associatedQuestionsSearchControl"></alto-input-search>

        <div class="panel questions-panel">
          <div *ngFor="let associatedQuestion of associatedQuestions" class="row">
            <div class="form-check form-switch col-1">
              <input
                class="form-check-input cursor-pointer"
                type="checkbox"
                [checked]="true"
              />
            </div>
            <div class="col-9 fs-7 fw-medium lh-lg">{{ associatedQuestion.title }}</div>
            <div class="col-2 text-end cursor-pointer">
              <i class="bi bi-pen"></i>
            </div>
          </div>
        </div>
        <alto-pagination class="mt-4 px-3"
        [pageControl]="associatedQuestionsPageControl"
        [itemsCount]="associatedQuestionsCount"
        [itemsPerPage]="10">
        </alto-pagination>
      </div>

      <div noResult class="text-center">
        <p class="fw-medium mb-8">{{ I18ns.shared.noData }}</p>
        <p class="fw-medium mb-8">{{ I18ns.shared.noDataSubtitle }}</p>
      </div>

      <div noData class="text-center">
        <p class="fw-medium mb-8">{{ I18ns.programs.forms.step2.newSubtitle }}</p>

        <button class="btn btn-primary mb-8">
          <i class="bi bi-plus-lg"></i> <span>{{ I18ns.programs.forms.step2.new }}</span>
        </button>
        <p class="fw-medium mb-8">{{ I18ns.programs.forms.step2.or }}</p>
      </div>
    </alto-placeholder-manager>

    <h2 class="mt-8">
      <img class="emoji" [src]=" associatedQuestionsDataStatus === EPlaceholderStatus.NO_DATA ? EmojiName.Memo : EmojiName.RedQuestionMark | emoji" width="16" height="16" />
      {{ associatedQuestionsDataStatus === EPlaceholderStatus.NO_DATA ? I18ns.programs.forms.step2.existing2.title : I18ns.programs.forms.step2.existing.title }}
    </h2>
    <p class="subtitle alto-grey mb-4">{{ associatedQuestionsDataStatus === EPlaceholderStatus.NO_DATA ? I18ns.programs.forms.step2.existing2.subtitle : I18ns.programs.forms.step2.existing.subtitle }}</p>

    <div class="panel questions-panel">
      <div *ngFor="let question of questions" class="row">
        <div class="form-check form-switch col-1">
          <input
            class="form-check-input cursor-pointer"
            type="checkbox"
            [checked]="false"
          />
        </div>
        <div class="col-9 fs-7 fw-medium lh-lg">{{ question.title }}</div>
        <div class="col-2 text-end cursor-pointer">
          <i class="bi bi-pen"></i>
        </div>
      </div>
    </div>
    <alto-pagination class="mt-4 px-3" [pageControl]="questionsPageControl" [itemsCount]="questionsCount" [itemsPerPage]="10"></alto-pagination>

  </div>

  <!-- SUMMARY TAB -->
  <div *ngSwitchCase="ETab.Summary">
    summary
  </div>
</ng-container>